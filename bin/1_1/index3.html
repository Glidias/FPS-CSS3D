<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	<title>FPS_Css</title>
	<meta name="description" content="" />
	<script src="../js/jquery-1.7.2.min.js"></script>
	
	<script type="text/javascript">
		$(document).ready( function() {
		var roomFiller = new glidias.RoomFiller();
		roomFiller.enableOutdoors = false;
		roomFiller.wallColor = "#000000";
		
		
			var GRID_SIZE = 5;
			roomFiller.run(function() {
			var sectors = roomFiller.getSectors(GRID_SIZE, 250);
				var arr = roomFiller.rooms;
				var len = arr.length;
				var i;
				var htmlStr = "<div>";
				var color;
				
				///*
				roomFiller.testUpdate(function(result) {
			//		htmlStr += result;
				}, GRID_SIZE)
				//*/
				
				/*
				for (i=0; i< len; i++) {
					color =  'rgb(' + Math.floor(Math.random() * 255) + ',' + Math.floor(Math.random() * 255) + ',' + Math.floor(Math.random() * 255) + ')';
					htmlStr += arr[i].toHTML("background-color:"+color, GRID_SIZE);
				}
				*/
				
				htmlStr += "</div>";	
				document.getElementById("testBed").innerHTML = htmlStr;
				
				
				
				htmlStr = "<div>";
				
				
				
				len = sectors.length; 
				var u;
				var uLen;
				// roomFiller.rooms.length
				for (i=0 ;  i< len; i++) {
					
					htmlStr +=glidias.AABBUtils.getRect(sectors[i],1).toHTML("background-color:#00ff00;", 1);
					var portalList = sectors[i].getPortalList();
					uLen = portalList.length;
					for (u=0;u<uLen; u++) {
					//	portalList[u].traceValid();
						htmlStr +=glidias.AABBUtils.getRect(portalList[u],1).toHTML("background-color:#ff0000; z-index:1", 1);
					}
				
				}
				htmlStr += "</div>";
				
				document.getElementById("testBed2").innerHTML = htmlStr;
				
			
			});
		});
	</script>
</head>
<body>
	<div id="haxe:trace" style="position:absolute; z-index:99999; left:410px; color:#FF4499"></div>
	<script src="../glidias.hx.js"></script>

	<div id="testBed" style="position:absolute">
		
	</div>
	
	<div id="testBed2"  style="position:absolute">
		
	</div>
	
	
</body>
</html>